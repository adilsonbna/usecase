{{- /*
Generated from 'nodes' from https://raw.githubusercontent.com/prometheus-operator/kube-prometheus/defa2bd1e242519c62a5c2b3b786b1caa6d906d4/manifests/grafana-dashboardDefinitions.yaml
Do not change in-place! In order to change this file first read following link:
https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack/hack
*/ -}}
{{- $kubeTargetVersion := default .Capabilities.KubeVersion.GitVersion .Values.kubeTargetVersionOverride }}
{{- if and (or .Values.grafana.enabled .Values.grafana.forceDeployDashboards) (semverCompare ">=1.14.0-0" $kubeTargetVersion) (semverCompare "<9.9.9-9" $kubeTargetVersion) .Values.grafana.defaultDashboardsEnabled (and (or .Values.nodeExporter.enabled .Values.nodeExporter.forceDeployDashboards) .Values.nodeExporter.operatingSystems.linux.enabled) }}
apiVersion: v1
kind: ConfigMap
metadata:
  namespace: {{ template "kube-prometheus-stack-grafana.namespace" . }}
  name: {{ printf "%s-%s" (include "kube-prometheus-stack.fullname" $) "possystem" | trunc 63 | trimSuffix "-" }}
  annotations:
{{ toYaml .Values.grafana.sidecar.dashboards.annotations | indent 4 }}
  labels:
    {{- if $.Values.grafana.sidecar.dashboards.label }}
    {{ $.Values.grafana.sidecar.dashboards.label }}: {{ ternary $.Values.grafana.sidecar.dashboards.labelValue "1" (not (empty $.Values.grafana.sidecar.dashboards.labelValue)) | quote }}
    {{- end }}
    app: {{ template "kube-prometheus-stack.name" $ }}-grafana
{{ include "kube-prometheus-stack.labels" $ | indent 4 }}
data:
  possystem.json: |-
    {{`{"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"-- Grafana --"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":0,"id":27,"links":[],"panels":[{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":13,"panels":[],"title":"Pos System ERN","type":"row"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":0,"displayName":"Total of Transations ERN","fieldMinMax":false,"mappings":[],"max":100000,"min":25000,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"blue","value":60000},{"color":"#EAB839","value":90000},{"color":"red","value":100000}]},"unit":"none"},"overrides":[]},"gridPos":{"h":8,"w":5,"x":0,"y":1},"id":1,"options":{"minVizHeight":75,"minVizWidth":75,"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"sizing":"auto"},"pluginVersion":"11.3.1","targets":[{"adhocFilters":[],"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"max(total_requests{app=\"dev-ern-pos-system\"})","fullMetaSearch":false,"includeNullMetadata":true,"interval":"","legendFormat":"${metric} (average)","range":true,"refId":"A","useBackend":false}],"title":"[Pos System] - Total page requests ERN","type":"gauge"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"fieldMinMax":false,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"currencyUSD"},"overrides":[]},"gridPos":{"h":4,"w":4,"x":5,"y":1},"id":8,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","percentChangeColorMode":"standard","reduceOptions":{"calcs":["lastNotNull"],"fields":"","limit":1,"values":true},"showPercentChange":true,"text":{},"textMode":"auto","wideLayout":true},"pluginVersion":"11.3.1","targets":[{"adhocFilters":[],"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","exemplar":false,"expr":"avg(total_sales_value{app=\"dev-ern-pos-system\"})","fullMetaSearch":false,"includeNullMetadata":true,"instant":true,"interval":"","legendFormat":"__auto","range":true,"refId":"A","useBackend":false}],"title":"[Pos System] - Total Sales USD","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","fillOpacity":80,"gradientMode":"hue","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineWidth":2,"scaleDistribution":{"log":2,"type":"log"},"thresholdsStyle":{"mode":"off"}},"fieldMinMax":false,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"currencyUSD"},"overrides":[]},"gridPos":{"h":8,"w":8,"x":9,"y":1},"id":16,"options":{"barRadius":0,"barWidth":0.97,"fullHighlight":false,"groupWidth":0.7,"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":false},"orientation":"auto","showValue":"always","stacking":"normal","tooltip":{"mode":"single","sort":"none"},"xTickLabelRotation":0,"xTickLabelSpacing":200},"pluginVersion":"11.3.1","targets":[{"adhocFilters":[],"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"code","exemplar":false,"expr":"max(total_sales_value{app=\"dev-ern-pos-system\"})","fullMetaSearch":false,"includeNullMetadata":true,"instant":true,"interval":"","legendFormat":"__auto","range":true,"refId":"A","useBackend":false}],"title":"[Pos System] - Total Sales USD","type":"barchart"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","fillOpacity":80,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineWidth":1,"scaleDistribution":{"type":"linear"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":8,"w":7,"x":17,"y":1},"id":17,"options":{"barRadius":0,"barWidth":0.88,"fullHighlight":false,"groupWidth":1,"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":false},"orientation":"auto","showValue":"always","stacking":"normal","tooltip":{"mode":"single","sort":"none"},"xTickLabelRotation":0,"xTickLabelSpacing":200},"pluginVersion":"11.3.1","targets":[{"adhocFilters":[],"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"sum(items_sold{app=\"dev-ern-pos-system\"})","fullMetaSearch":false,"includeNullMetadata":true,"instant":true,"interval":"","legendFormat":"${metric} (average)","range":true,"refId":"A","useBackend":false}],"title":"[Pos System] - Items Sold","type":"barchart"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":4,"x":5,"y":5},"id":14,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"auto","percentChangeColorMode":"standard","reduceOptions":{"calcs":["lastNotNull"],"fields":"","limit":1,"values":true},"showPercentChange":false,"text":{},"textMode":"auto","wideLayout":true},"pluginVersion":"11.3.1","targets":[{"adhocFilters":[],"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"sum(items_sold{app=\"dev-ern-pos-system\"})","fullMetaSearch":false,"includeNullMetadata":true,"instant":true,"interval":"","legendFormat":"${metric} (average)","range":true,"refId":"A","useBackend":false}],"title":"[Pos System] - Items Sold Total","type":"stat"},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":9},"id":12,"panels":[],"title":"Pos System KKM","type":"row"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":0,"displayName":"Total of Transations KKM","fieldMinMax":false,"mappings":[],"max":100000,"min":25000,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"blue","value":60000},{"color":"#EAB839","value":90000},{"color":"red","value":100000}]},"unit":"none"},"overrides":[]},"gridPos":{"h":8,"w":5,"x":0,"y":10},"id":11,"options":{"minVizHeight":75,"minVizWidth":75,"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"sizing":"auto"},"pluginVersion":"11.3.1","targets":[{"adhocFilters":[],"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"max(total_requests{app=\"dev-kkm-pos-system\"})","fullMetaSearch":false,"includeNullMetadata":true,"interval":"","legendFormat":"${metric} (average)","range":true,"refId":"A","useBackend":false}],"title":"[Pos System] - Total page requests KKM","type":"gauge"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"fieldMinMax":false,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"currencyUSD"},"overrides":[]},"gridPos":{"h":4,"w":4,"x":5,"y":10},"id":15,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","percentChangeColorMode":"standard","reduceOptions":{"calcs":["lastNotNull"],"fields":"","limit":1,"values":true},"showPercentChange":true,"text":{},"textMode":"auto","wideLayout":true},"pluginVersion":"11.3.1","targets":[{"adhocFilters":[],"datasource":{"type":"prometheus","uid":"prometheus"},"editorMode":"code","exemplar":false,"expr":"avg(total_sales_value{} )","instant":true,"interval":"","legendFormat":"__auto","range":true,"refId":"A"}],"title":"[Pos System] - Total Sales USD","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","fillOpacity":80,"gradientMode":"hue","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineWidth":2,"scaleDistribution":{"log":2,"type":"log"},"thresholdsStyle":{"mode":"off"}},"fieldMinMax":false,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"currencyUSD"},"overrides":[]},"gridPos":{"h":8,"w":8,"x":9,"y":10},"id":9,"options":{"barRadius":0,"barWidth":0.97,"fullHighlight":false,"groupWidth":0.7,"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":false},"orientation":"auto","showValue":"always","stacking":"normal","tooltip":{"mode":"single","sort":"none"},"xTickLabelRotation":0,"xTickLabelSpacing":200},"pluginVersion":"11.3.1","targets":[{"adhocFilters":[],"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","exemplar":false,"expr":"max(total_sales_value{app=\"dev-kkm-pos-system\"})","fullMetaSearch":false,"includeNullMetadata":true,"instant":true,"interval":"","legendFormat":"__auto","range":true,"refId":"A","useBackend":false}],"title":"[Pos System] - Total Sales USD","type":"barchart"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","fillOpacity":80,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineWidth":1,"scaleDistribution":{"type":"linear"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":8,"w":7,"x":17,"y":10},"id":7,"options":{"barRadius":0,"barWidth":0.88,"fullHighlight":false,"groupWidth":1,"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":false},"orientation":"auto","showValue":"always","stacking":"normal","tooltip":{"mode":"single","sort":"none"},"xTickLabelRotation":0,"xTickLabelSpacing":200},"pluginVersion":"11.3.1","targets":[{"adhocFilters":[],"datasource":{"type":"prometheus","uid":"prometheus"},"editorMode":"code","expr":"sum(items_sold{} )","instant":true,"interval":"","legendFormat":"${metric} (average)","range":true,"refId":"A"}],"title":"[Pos System] - Items Sold","type":"barchart"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":4,"x":5,"y":14},"id":10,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"auto","percentChangeColorMode":"standard","reduceOptions":{"calcs":["lastNotNull"],"fields":"","limit":1,"values":true},"showPercentChange":false,"text":{},"textMode":"auto","wideLayout":true},"pluginVersion":"11.3.1","targets":[{"adhocFilters":[],"datasource":{"type":"prometheus","uid":"prometheus"},"editorMode":"code","expr":"sum(items_sold{} )","instant":true,"interval":"","legendFormat":"${metric} (average)","range":true,"refId":"A"}],"title":"[Pos System] - Items Sold Total","type":"stat"}],"preload":false,"refresh":"5s","schemaVersion":40,"tags":[],"templating":{"list":[]},"time":{"from":"now-5m","to":"now"},"timepicker":{},"timezone":"browser","title":"POS System Dashborad Use Case","uid":"eeagybktbme4gd","version":2,"weekStart":""}`}}
{{- end }}